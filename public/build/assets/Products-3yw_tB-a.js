import{j as e}from"./animation-vendor-cqAOgI-L.js";import{r as a}from"./react-vendor-DBIh15m-.js";import{a as t}from"./http-vendor-Dos3PyFQ.js";import{L as s}from"./Layout-Di4KQfwB.js";import{d as r,L as n}from"./router-vendor-DY4tAilk.js";import"./app-CMtZu_Fm.js";const l=()=>{var n,l,i,c,d,g;const[x,m]=r(),[h,p]=a.useState([]),[u,v]=a.useState(null),[j,b]=a.useState({categories:[],brands:[]}),[y,f]=a.useState(!0),[N,w]=a.useState(!1),[k,_]=a.useState(x.get("category")||""),[C,L]=a.useState(x.get("brand")||""),[S,z]=a.useState(x.get("search")||""),[M,H]=a.useState(x.get("sort")||"latest"),[B,T]=a.useState(x.get("min_price")||""),[W,P]=a.useState(x.get("max_price")||""),[R,A]=a.useState("grid");a.useEffect(()=>{D(),window.scrollTo(0,0)},[x]);const D=async()=>{w(!1),f(!0);try{const e=new URLSearchParams;x.get("category")&&e.append("category",x.get("category")),x.get("brand")&&e.append("brand",x.get("brand")),x.get("search")&&e.append("search",x.get("search")),x.get("sort")&&e.append("sort",x.get("sort")),x.get("min_price")&&e.append("min_price",x.get("min_price")),x.get("max_price")&&e.append("max_price",x.get("max_price")),x.get("page")&&e.append("page",x.get("page"));const a=await t.get(`/api/products?${e.toString()}`);p(a.data.products),v(a.data.pagination),b(a.data.filters),f(!1),setTimeout(()=>w(!0),50)}catch(e){f(!1)}},$=(e,a)=>{const t=new URLSearchParams(x);a?t.set(e,a):t.delete(e),t.delete("page"),m(t)},U=()=>{const e=new URLSearchParams(x);B?e.set("min_price",B):e.delete("min_price"),W?e.set("max_price",W):e.delete("max_price"),e.delete("page"),m(e)},V=e=>{const a=new URLSearchParams(x);a.set("page",e),m(a)},G=null==(n=j.categories)?void 0:n.find(e=>e.slug===k);return e.jsxs(s,{children:[e.jsxs("div",{className:"relative h-[300px] md:h-[400px] overflow-hidden",children:[e.jsx("img",{src:"he-thong-tram-sac"===k?"/imgs/products/thumbnail-station.jpg":"xe-tai-dien"===k||"light-truck"===k?"/imgs/products/thumbnail-electric-truck.jpg":"/imgs/products/unnamed.jpg",alt:"Products Banner",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/50 to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4 animate-fade-in-left",children:"he-thong-tram-sac"===k?"Charging Station":"xe-tai-dien"===k||"light-truck"===k?"Light Truck":G?G.name:"All Products"}),e.jsx("p",{className:"text-lg text-gray-200 animate-fade-in-left",style:{animationDelay:"0.1s"},children:"he-thong-tram-sac"===k?"Hệ thống trạm sạc điện tiên tiến cho xe điện":"xe-tai-dien"===k||"light-truck"===k?"Xe tải hạng nhẹ chuyên phục vụ việc phân phối đô thị":(null==G?void 0:G.description)?G.description:"Khám phá bộ sưu tập xe điện và thiết bị sạc đa dạng của chúng tôi"})]})})})]}),e.jsx("div",{className:"bg-white py-8 transition-opacity duration-500 "+(N?"opacity-100":"opacity-0"),children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),$("search",S)},className:"relative max-w-2xl",children:[e.jsx("input",{type:"text",value:S,onChange:e=>z(e.target.value),placeholder:"Tìm kiếm sản phẩm...",className:"w-full pl-4 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-gray-500 hover:text-orange-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[e.jsxs("select",{value:k,onChange:e=>{_(e.target.value),$("category",e.target.value)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"All Categories"}),null==(l=j.categories)?void 0:l.map(a=>e.jsx("option",{value:a.slug,children:a.name},a.id))]}),e.jsxs("select",{value:M,onChange:e=>{H(e.target.value),$("sort",e.target.value)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"latest",children:"Tên A-Z"}),e.jsx("option",{value:"name_asc",children:"Tên A-Z"}),e.jsx("option",{value:"name_desc",children:"Tên Z-A"}),e.jsx("option",{value:"price_asc",children:"Giá thấp - cao"}),e.jsx("option",{value:"price_desc",children:"Giá cao - thấp"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Khoảng giá"}),e.jsx("input",{type:"number",value:B,onChange:e=>T(e.target.value),placeholder:"0",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("input",{type:"number",value:W,onChange:e=>P(e.target.value),placeholder:"0",className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("button",{onClick:U,className:"p-2 text-gray-500 hover:text-orange-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Hiển thị"}),e.jsx("button",{onClick:()=>A("grid"),className:"p-2 rounded "+("grid"===R?"bg-orange-500 text-white":"bg-gray-100 text-gray-600"),children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zm-12 6h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zm-12 6h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z"})})}),e.jsx("button",{onClick:()=>A("list"),className:"p-2 rounded "+("list"===R?"bg-orange-500 text-white":"bg-gray-100 text-gray-600"),children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h16v2H4v-2z"})})})]})]}),(k||C||S||B||W)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[k&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:["Danh mục: ",null==(c=null==(i=j.categories)?void 0:i.find(e=>e.slug===k))?void 0:c.name,e.jsx("button",{onClick:()=>{_(""),$("category","")},className:"ml-1 hover:text-orange-900",children:"×"})]}),C&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:["Brand: ",null==(g=null==(d=j.brands)?void 0:d.find(e=>e.slug===C))?void 0:g.name,e.jsx("button",{onClick:()=>{L(""),$("brand","")},className:"ml-1 hover:text-orange-900",children:"×"})]}),S&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:["Tìm: ",S,e.jsx("button",{onClick:()=>{z(""),$("search","")},className:"ml-1 hover:text-orange-900",children:"×"})]}),(B||W)&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:["Giá: $",B||"0"," - $",W||"∞",e.jsx("button",{onClick:()=>{T(""),P(""),U()},className:"ml-1 hover:text-orange-900",children:"×"})]}),e.jsx("button",{onClick:()=>{_(""),L(""),z(""),H("latest"),T(""),P(""),m(new URLSearchParams)},className:"text-sm text-gray-500 hover:text-orange-500 underline",children:"Xóa tất cả"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("p",{className:"text-gray-600",children:[e.jsxs("span",{className:"text-orange-500 font-semibold",children:["Hiển thị ",h.length>0?`1-${h.length}`:"0"]})," ","trong ",(null==u?void 0:u.total)||0," sản phẩm"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Sản phẩm mỗi trang:"}),e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white",value:x.get("per_page")||"12",onChange:e=>$("per_page",e.target.value),children:[e.jsx("option",{value:"12",children:"12"}),e.jsx("option",{value:"24",children:"24"}),e.jsx("option",{value:"48",children:"48"})]})]})]}),y?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):0===h.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("svg",{className:"mx-auto w-16 h-16 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Không tìm thấy sản phẩm"}),e.jsx("p",{className:"text-gray-500",children:"Thử thay đổi bộ lọc hoặc từ khóa tìm kiếm"})]}):e.jsx("div",{className:"grid gap-6 "+("grid"===R?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:h.map((a,t)=>e.jsx(o,{product:a,viewMode:R,index:t},a.id))}),u&&u.last_page>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-12",children:[e.jsx("button",{onClick:()=>V(u.current_page-1),disabled:1===u.current_page,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"←"}),[...Array(u.last_page)].map((a,t)=>e.jsx("button",{onClick:()=>V(t+1),className:"px-4 py-2 rounded-lg "+(u.current_page===t+1?"bg-orange-500 text-white":"border border-gray-300 hover:bg-gray-50"),children:t+1},t)),e.jsx("button",{onClick:()=>V(u.current_page+1),disabled:u.current_page===u.last_page,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"→"})]})]})})]})},o=({product:t,viewMode:s,index:r})=>{const[l,o]=a.useState(!1);return"list"===s?e.jsxs(n,{to:`/products-detail/${t.slug}`,className:"flex gap-6 p-4 bg-white border border-gray-200 rounded-xl hover:shadow-lg transition-all duration-300 animate-fade-in",style:{animationDelay:.05*r+"s"},children:[e.jsx("div",{className:"w-48 h-32 flex-shrink-0 overflow-hidden rounded-lg",children:e.jsx("img",{src:t.primary_image,alt:t.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.brand&&e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:t.brand.name}),t.category&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-600 text-xs rounded",children:t.category.name})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:t.name}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-3",children:t.short_description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-orange-500",children:t.formatted_price}),e.jsxs("span",{className:"text-orange-500 text-sm flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Xem Details"]})]})]})]}):e.jsxs(n,{to:`/products-detail/${t.slug}`,className:"group bg-white border border-gray-200 rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] animate-fade-in",style:{animationDelay:.05*r+"s"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-gray-50",children:[e.jsx("img",{src:t.primary_image,alt:t.name,className:"w-full h-full object-contain p-4 transition-all duration-500 "+(l?"scale-110":"")}),e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center transition-opacity duration-300 "+(l?"opacity-100":"opacity-0"),children:e.jsx("div",{className:"text-center text-white",children:t.evc_spec&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.evc_spec.range_km&&e.jsxs("div",{className:"bg-white/10 px-3 py-2 rounded",children:[e.jsx("p",{className:"text-orange-300 text-xs",children:"Range"}),e.jsx("p",{className:"font-bold",children:t.evc_spec.range_km})]}),t.evc_spec.power_kw&&e.jsxs("div",{className:"bg-white/10 px-3 py-2 rounded",children:[e.jsx("p",{className:"text-orange-300 text-xs",children:"Power"}),e.jsx("p",{className:"font-bold",children:t.evc_spec.power_kw})]})]})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.brand&&e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:t.brand.name}),t.category&&e.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-600 text-xs rounded",children:t.category.name})]}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1 line-clamp-1 group-hover:text-orange-500 transition-colors",children:t.name}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-3",children:t.short_description}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsx("span",{className:"text-lg font-bold text-orange-500",children:t.formatted_price}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})})]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("span",{className:"flex items-center justify-center gap-2 w-full py-2 bg-gray-900 text-white rounded-lg text-sm font-semibold group-hover:bg-orange-500 transition-colors",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"See Details"]})})]})};export{l as default};
